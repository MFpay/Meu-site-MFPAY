<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MFpay | Secure Access</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { background: #0b0e11; color: #fff; font-family: 'Inter', sans-serif; }
        .login-card { background: #161a1e; border: 1px solid #232a31; border-radius: 32px; box-shadow: 0 30px 60px rgba(0,0,0,0.6); }
        input { background: #0b0e11 !important; border: 1px solid #232a31 !important; color: #fff; outline: none; transition: 0.3s; }
        input:focus { border-color: #00e38c !important; }
        .btn-mf { background: #00e38c; color: #0b0e11; font-weight: 900; transition: 0.3s; cursor: pointer; }
    </style>
</head>
<body class="flex items-center justify-center h-screen px-4">
    <div class="login-card p-12 w-full max-w-[420px] text-center">
        <div class="mb-10 text-center flex flex-col items-center">
            <div class="inline-flex p-4 bg-[#00e38c]/10 rounded-3xl mb-4">
                <i data-lucide="shield-check" class="text-[#00e38c] w-12 h-12"></i>
            </div>
            <h1 class="text-4xl font-black italic text-[#00e38c] tracking-tighter uppercase text-center">MFPAY</h1>
            <p class="text-[10px] text-zinc-600 uppercase tracking-[0.5em] font-black mt-2">Security Protocol Active</p>
        </div>
        
        <div class="space-y-4">
            <input type="email" id="email" placeholder="E-mail" class="w-full p-5 rounded-2xl text-sm">
            <input type="password" id="pass" placeholder="PIN de Acesso" class="w-full p-5 rounded-2xl text-sm">
        </div>

        <button onclick="autenticar()" id="btn" class="btn-mf w-full py-5 rounded-2xl mt-10 uppercase text-xs tracking-widest italic">Acessar Rede Segura</button>
    </div>

<script>
    lucide.createIcons();
    const API = "https://sheetdb.io/api/v1/n1iq28pv28d009pq";

    async function autenticar() {
        const e = document.getElementById('email').value.toLowerCase().trim();
        const p = document.getElementById('pass').value.trim();
        const b = document.getElementById('btn');
        if(!e || !p) return alert("Preencha todos os campos");

        b.innerText = "SINCRO..."; b.disabled = true;

        try {
            const res = await fetch(`${API}/search?merchant=${e}&tipo=CADASTRO`);
            const data = await res.json();

            if (data.length > 0) {
                if (data[0].id === p) {
                    localStorage.setItem('mf_user', e);
                    window.location.href = 'dashboard.html';
                } else {
                    alert("PIN incorreto.");
                    b.disabled = false; b.innerText = "Acessar Rede Segura";
                }
            } else {
                await fetch(API, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ data: [{ id: p, merchant: e, tipo: 'CADASTRO', status: 'Aprovado', data_hora: new Date().toLocaleString() }]})
                });
                localStorage.setItem('mf_user', e);
                window.location.href = 'dashboard.html';
            }
        } catch (err) { b.disabled = false; b.innerText = "Erro de Rede"; }
    }
</script>
</body>
</html>
