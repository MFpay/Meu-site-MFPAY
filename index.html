<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MF-PAY | GAMES</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#0b0e11] text-white font-sans pb-20">
    <nav class="p-6 border-b border-white/5 flex justify-between items-center sticky top-0 bg-[#0b0e11] z-50">
        <h1 class="text-xl font-black italic text-[#00e38c]">MF-PAY</h1>
        <div class="text-right">
            <p class="text-[8px] text-zinc-500 uppercase font-bold">Saldo</p>
            <h2 id="saldo-txt" class="text-lg font-black text-[#00e38c]">R$ 0,00</h2>
        </div>
    </nav>

    <main class="p-4 max-w-md mx-auto space-y-6">
        <div class="bg-gradient-to-r from-[#00e38c]/20 to-transparent p-4 rounded-2xl border border-[#00e38c]/30 flex justify-between items-center">
            <div><h3 class="font-bold text-sm text-[#00e38c]">Giro Gr√°tis</h3><p class="text-[10px] text-zinc-400">1x a cada 24h</p></div>
            <button onclick="giroGratis()" id="btn-free" class="bg-[#00e38c] text-black px-4 py-2 rounded-xl font-black text-[10px] uppercase">Girar</button>
        </div>

        <h3 class="text-[10px] font-bold text-zinc-500 uppercase tracking-widest px-2">Abrir Caixas</h3>
        <div class="grid grid-cols-2 gap-4">
            <div onclick="abrirCaixa(5)" class="bg-[#161a1e] p-4 rounded-3xl border border-white/5 text-center active:scale-90 transition">
                <div class="text-3xl mb-2">üì¶</div><p class="text-[10px] font-bold">BRONZE</p><p class="text-[#00e38c] font-black text-xs">R$ 5,00</p>
            </div>
            <div onclick="abrirCaixa(50)" class="bg-[#161a1e] p-4 rounded-3xl border border-[#ffbb00]/20 text-center active:scale-90 transition">
                <div class="text-3xl mb-2">üíé</div><p class="text-[10px] font-bold">LEND√ÅRIA</p><p class="text-[#ffbb00] font-black text-xs">R$ 50,00</p>
            </div>
        </div>

        <div id="resultado" class="hidden bg-[#161a1e] p-6 rounded-[30px] border-2 border-[#00e38c] text-center">
            <p class="text-[10px] text-zinc-500 uppercase mb-2">Voc√™ ganhou:</p>
            <div id="carta-img" class="text-5xl mb-3">üé¥</div>
            <h4 id="carta-nome" class="font-black text-xl italic uppercase">CARTA</h4>
            <p id="carta-raridade" class="text-[10px] font-bold mt-1 text-[#00e38c]">RARIDADE</p>
        </div>

        <div class="bg-[#161a1e] p-6 rounded-[30px] border border-white/5">
            <h4 class="text-[10px] font-bold text-zinc-500 uppercase mb-4 text-center">Depositar Saldo</h4>
            <div class="bg-black/40 p-3 rounded-xl border border-white/5 mb-4 text-center">
                <p class="text-[8px] text-zinc-500 mb-1 uppercase tracking-widest">PIX E-mail</p>
                <p class="text-[10px] font-mono text-[#00e38c] break-all">contaprajogoplaystaicion@gmail.com</p>
            </div>
            <a href="https://wa.me/5519999351550?text=Ol√° MF, fiz um PIX. Meu e-mail √©: " target="_blank" class="block w-full py-4 bg-white text-black text-center rounded-xl font-black text-[10px] uppercase">Enviar Comprovante</a>
        </div>
    </main>

<script>
    const DB_URL = "https://api.jsonbin.io/v3/b/65cd2a96dc74654018b36873";
    const KEY = "$2a$10$BH1hrj8d.ptln54HlH7u/Oo2rbwnadiFrQZDHfXHEOSy2nwtswFMG";
    const user = localStorage.getItem('mf_user');
    if (!user) window.location.href = 'login.html';
    let saldoAtual = 0;
    const cartas = [
        { nome: "Drag√£o MF", icon: "üêâ", raridade: "Lend√°ria", chance: 5 },
        { nome: "Glock Gold", icon: "üî´", raridade: "√âpica", chance: 15 },
        { nome: "Cavaleiro", icon: "‚öîÔ∏è", raridade: "Rara", chance: 30 },
        { nome: "Soldado", icon: "üíÇ", raridade: "Comum", chance: 50 }
    ];
    async function sync() {
        const res = await fetch(DB_URL, { headers: { "X-Master-Key": KEY }});
        const data = await res.json();
        saldoAtual = data.record.usuarios[user].saldo || 0;
        document.getElementById('saldo-txt').innerText = `R$ ${saldoAtual.toFixed(2)}`;
    }
    async function abrirCaixa(valor) {
        if (saldoAtual < valor) return alert("Saldo insuficiente!");
        const sort = Math.random() * 100;
        let ganha = cartas[3];
        if (sort < 5) ganha = cartas[0]; else if (sort < 20) ganha = cartas[1]; else if (sort < 50) ganha = cartas[2];
        const res = await fetch(DB_URL, { headers: { "X-Master-Key": KEY }});
        const data = await res.json();
        let db = data.record;
        db.usuarios[user].saldo -= valor;
        await fetch(DB_URL, { method: 'PUT', headers: { "Content-Type": "application/json", "X-Master-Key": KEY }, body: JSON.stringify(db) });
        document.getElementById('resultado').classList.remove('hidden');
        document.getElementById('carta-img').innerText = ganha.icon;
        document.getElementById('carta-nome').innerText = ganha.nome;
        document.getElementById('carta-raridade').innerText = ganha.raridade;
        sync();
    }
    function giroGratis() {
        const last = localStorage.getItem('mf_last_spin');
        const now = new Date().getTime();
        if (last && now - last < 86400000) return alert("Volte amanh√£!");
        localStorage.setItem('mf_last_spin', now);
        abrirCaixa(0);
    }
    sync();
</script>
</body>
</html>
