<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MF-CLOUD | Autenticação Profissional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { background: #0b0e11; color: #fff; font-family: 'Inter', sans-serif; overflow: hidden; }
        .glass-card { background: #161a1e; border: 1px solid rgba(0, 227, 140, 0.1); border-radius: 40px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }
        input { background: #0b0e11 !important; border: 1px solid #232a31 !important; color: #fff !important; outline: none; transition: 0.3s; }
        input:focus { border-color: #00e38c !important; box-shadow: 0 0 15px rgba(0, 227, 140, 0.1); }
        .btn-primary { background: #00e38c; color: #000; font-weight: 900; transition: 0.3s; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0, 227, 140, 0.3); }
        .tab-active { color: #00e38c; border-bottom: 2px solid #00e38c; }
    </style>
</head>
<body class="flex items-center justify-center h-screen px-4 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-[#161a1e] via-[#0b0e11] to-[#0b0e11]">

    <div class="glass-card p-10 w-full max-w-[420px] relative z-10">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-black italic tracking-tighter uppercase">MF<span class="text-[#00e38c]">CLOUD</span></h1>
            <div class="flex justify-center gap-6 mt-6 text-[10px] font-black uppercase tracking-widest text-zinc-500">
                <button id="tab-login" onclick="switchTab('login')" class="pb-2 tab-active">Entrar</button>
                <button id="tab-register" onclick="switchTab('register')" class="pb-2">Cadastrar</button>
            </div>
        </div>
        
        <div id="auth-form" class="space-y-5">
            <div>
                <label class="text-[9px] font-black uppercase text-zinc-600 ml-2 mb-2 block">Identificação Digital (E-mail)</label>
                <input type="email" id="email" placeholder="nome@email.com" class="w-full p-4 rounded-2xl text-sm">
            </div>
            <div>
                <label class="text-[9px] font-black uppercase text-zinc-600 ml-2 mb-2 block">Chave de Acesso (PIN)</label>
                <input type="password" id="pass" placeholder="••••••" class="w-full p-4 rounded-2xl text-sm font-bold tracking-[0.5em]">
            </div>
            
            <button onclick="autenticar()" id="mainBtn" class="btn-primary w-full py-5 rounded-2xl mt-4 uppercase text-xs tracking-widest italic flex items-center justify-center gap-2">
                Acessar Terminal <i data-lucide="log-in" class="w-4 h-4"></i>
            </button>
        </div>

        <p id="msg-feedback" class="text-center mt-6 text-[9px] font-bold uppercase tracking-widest text-zinc-700">Conexão Criptografada Ativa</p>
    </div>

<script>
    lucide.createIcons();
    
    // LINK DO SEU BANCO DE DADOS REAL NA NUVEM
    const CLOUD_DB_URL = "https://api.jsonbin.io/v3/b/65cd2a96dc74654018b36873"; 
    const MASTER_KEY = "$2a$10$ExemploChaveMestreMFPAY2026"; 
    
    let mode = 'login';

    function switchTab(newMode) {
        mode = newMode;
        document.getElementById('tab-login').className = mode === 'login' ? 'pb-2 tab-active' : 'pb-2';
        document.getElementById('tab-register').className = mode === 'register' ? 'pb-2 tab-active' : 'pb-2';
        document.getElementById('mainBtn').innerHTML = mode === 'login' ? 'Acessar Terminal <i data-lucide="log-in" class="w-4 h-4"></i>' : 'Criar Nova Conta <i data-lucide="user-plus" class="w-4 h-4"></i>';
        lucide.createIcons();
    }

    async function autenticar() {
        const e = document.getElementById('email').value.toLowerCase().trim();
        const p = document.getElementById('pass').value.trim();
        const btn = document.getElementById('mainBtn');
        const feedback = document.getElementById('msg-feedback');

        if(!e || !p) return alert("Preencha todos os campos!");

        btn.disabled = true;
        btn.innerText = "SINCROZINANDO...";

        try {
            const res = await fetch(CLOUD_DB_URL, { headers: { "X-Master-Key": MASTER_KEY } });
            const json = await res.json();
            const db = json.record;

            if (mode === 'login') {
                // LÓGICA DE ENTRAR NA CONTA REAL
                if (db.usuarios[e]) {
                    if (db.usuarios[e].pin === p) {
                        localStorage.setItem('mf_user', e);
                        feedback.innerText = "ACESSO PERMITIDO!";
                        window.location.href = 'index.html';
                    } else {
                        alert("PIN Incorreto!");
                    }
                } else {
                    alert("Usuário não encontrado! Mude para a aba 'Cadastrar'.");
                }
            } else {
                // LÓGICA DE CRIAR CONTA REAL NO BANCO
                if (db.usuarios[e]) {
                    alert("Este e-mail já possui uma conta ativa!");
                } else {
                    db.usuarios[e] = { saldo: 0, pin: p, cartas: [] };
                    await fetch(CLOUD_DB_URL, {
                        method: 'PUT',
                        headers: { "Content-Type": "application/json", "X-Master-Key": MASTER_KEY },
                        body: JSON.stringify(db)
                    });
                    localStorage.setItem('mf_user', e);
                    alert("Conta criada com sucesso!");
                    window.location.href = 'index.html';
                }
            }
        } catch (err) {
            alert("Erro de conexão com a Nuvem.");
        } finally {
            btn.disabled = false;
            switchTab(mode);
        }
    }
</script>
</body>
</html>
