<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MF | Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>.tab { display: none; } .tab.active { display: block; animation: fadeIn 0.5s ease; } .nav-link { opacity: 0.3; cursor: pointer; transition: 0.3s; } .nav-link.active { opacity: 1; color: #80ff44; }</style>
</head>
<body class="bg-black text-white min-h-screen flex flex-col md:flex-row">
    <aside class="w-full md:w-80 bg-[#050505] border-r border-white/5 p-12 flex md:flex-col gap-12">
        <h1 class="text-4xl font-black italic text-[#80ff44]">MF</h1>
        <nav class="flex md:flex-col gap-8 text-[11px] font-bold uppercase tracking-[0.3em]">
            <div onclick="tab('d', this)" class="nav-link active">Resumo</div>
            <div onclick="tab('r', this)" class="nav-link">Depósito</div>
            <div onclick="tab('s', this)" class="nav-link">Saque</div>
        </nav>
    </aside>
    <main class="flex-1 p-10 md:p-20 overflow-y-auto">
        <section id="d" class="tab active">
            <p class="text-[10px] opacity-20 uppercase font-black mb-2 tracking-[0.5em]">Patrimônio</p>
            <h2 id="bal" class="text-7xl md:text-9xl font-black tracking-tighter">R$ 0,00</h2>
        </section>
        <section id="r" class="tab max-w-xl">
            <h2 class="text-3xl font-black mb-8 italic uppercase">Remessa</h2>
            <input type="number" id="v-in" placeholder="Valor" class="w-full bg-[#0a0a0a] p-8 rounded-3xl mb-6 text-3xl font-black outline-none border border-white/5">
            <button onclick="env('DEPOSITO')" class="w-full bg-[#80ff44] text-black py-8 rounded-[35px] font-black uppercase italic">Confirmar</button>
        </section>
        <section id="s" class="tab max-w-xl">
            <h2 class="text-3xl font-black mb-8 italic uppercase">Saque</h2>
            <input type="number" id="v-out" placeholder="Valor" class="w-full bg-[#0a0a0a] p-8 rounded-3xl mb-4 text-3xl font-black outline-none">
            <button onclick="env('SAQUE')" class="w-full bg-white text-black py-8 rounded-[35px] font-black uppercase italic">Solicitar</button>
        </section>
    </main>
    <script>
        const API = 'https://sheetdb.io/api/v1/n1iq28pv28d009pq', u = sessionStorage.getItem('mf_u') || 'User';
        function tab(id, el) { document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active')); document.querySelectorAll('.nav-link').forEach(l=>l.classList.remove('active')); document.getElementById(id).classList.add('active'); el.classList.add('active'); }
        async function env(t) {
            const v = t==='DEPOSITO'?document.getElementById('v-in').value:document.getElementById('v-out').value;
            await fetch(API, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ data: [{ id: Date.now(), merchant: u, tipo: t, valor: v, status: 'Pendente', data_hora: new Date().toLocaleString() }]}) });
            location.reload();
        }
        async function load() {
            const res = await fetch(API); const d = await res.json();
            const s = d.filter(i=>i.merchant===u && i.status==='Aprovado').reduce((a,c)=>c.tipo==='DEPOSITO'?a+parseFloat(c.valor):a-parseFloat(c.valor), 0);
            document.getElementById('bal').innerText = `R$ ${s.toLocaleString('pt-BR', {minimumFractionDigits:2})}`;
        }
        load();
    </script>
</body>
</html>
