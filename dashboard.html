<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MFpay | Dashboard Elite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; }
        .glass { background: rgba(10, 10, 10, 0.9); backdrop-filter: blur(15px); border-top: 1px solid rgba(255,255,255,0.05); }
        @media (min-width: 768px) { .glass { border-top: none; border-right: 1px solid rgba(255,255,255,0.05); } }
        .sidebar-item { transition: 0.3s; cursor: pointer; opacity: 0.4; text-align: center; font-size: 9px; font-weight: 900; }
        @media (min-width: 768px) { .sidebar-item { text-align: left; font-size: 11px; padding: 18px; opacity: 0.5; } }
        .sidebar-item.active { color: #80ff44; opacity: 1; }
        @media (min-width: 768px) { .sidebar-item.active { background: #80ff44; color: #000; border-radius: 15px; } }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        input { background: #0a0a0a !important; border: 1px solid #1a1a1a !important; color: white; padding: 16px; border-radius: 16px; width: 100%; outline: none; }
    </style>
</head>
<body class="flex flex-col md:flex-row min-h-screen">

    <aside class="fixed bottom-0 left-0 w-full h-20 md:h-full md:w-72 md:relative glass p-2 md:p-8 flex md:flex-col z-50 justify-around md:justify-start">
        <div class="hidden md:block mb-12 px-2"><h1 class="text-3xl font-black italic">MF<span class="text-[#80ff44]">PAY</span></h1></div>
        <nav class="flex flex-row md:flex-col w-full md:space-y-2">
            <div onclick="showTab('dash')" class="sidebar-item active flex-1 md:flex-none py-4">DASHBOARD</div>
            <div onclick="showTab('deposito')" class="sidebar-item flex-1 md:flex-none py-4">RECARGA</div>
            <div onclick="showTab('saque')" class="sidebar-item flex-1 md:flex-none py-4 text-[#80ff44]">SAQUE</div>
            <div onclick="showTab('suporte')" class="sidebar-item flex-1 md:flex-none py-4 text-blue-400">SUPORTE</div>
        </nav>
    </aside>

    <main class="flex-1 p-6 md:p-16 mb-24 md:mb-0 overflow-y-auto">
        <div id="dash" class="tab-content active">
            <h2 class="text-3xl md:text-5xl font-black mb-8 italic uppercase text-[#80ff44]">Capital</h2>
            <div class="bg-[#050505] border border-white/10 p-10 rounded-[40px] inline-block">
                <h2 id="bal" class="text-6xl md:text-8xl font-black tracking-tighter">R$ 0,00</h2>
            </div>
        </div>

        <div id="deposito" class="tab-content max-w-2xl mx-auto">
            <h2 class="text-3xl font-black mb-10 italic uppercase text-center">Injetar Saldo</h2>
            <div class="bg-[#0a0a0a] p-10 rounded-[40px] border border-white/5 space-y-6">
                <input type="number" id="val-dep" oninput="gerarPix()" placeholder="Valor R$ 0,00" class="text-3xl font-black">
                <div id="pix-gerado" class="hidden bg-[#80ff44]/5 p-6 rounded-2xl border border-[#80ff44]/20 text-center">
                    <p class="text-[10px] font-black text-[#80ff44] mb-4 uppercase">Copia e Cola Gerado:</p>
                    <code id="pix-code" class="text-[9px] break-all opacity-60">CHAVE_PIX_AQUI</code>
                    <button onclick="copyPix()" class="block w-full mt-4 bg-[#80ff44] text-black py-2 rounded-lg font-black text-[10px]">COPIAR PIX</button>
                </div>
                <input type="text" id="link-comp" placeholder="Link do Comprovante">
                <button onclick="enviarOp('DEPOSITO')" class="w-full bg-[#80ff44] text-black py-6 rounded-2xl font-black uppercase italic">Confirmar Injeção</button>
            </div>
        </div>

        </main>

    <script>
        const API = 'https://sheetdb.io/api/v1/q28pv28d009pq';
        const user = sessionStorage.getItem('user_mf');
        
        function gerarPix() {
            const val = document.getElementById('val-dep').value;
            if(val > 0) {
                document.getElementById('pix-gerado').classList.remove('hidden');
                document.getElementById('pix-code').innerText = "00020101021226580014BR.GOV.BCB.PIX0114SUACHAVEPIX520400005303986540"+val+"5802BR5905MFPAY";
            }
        }

        function copyPix() {
            navigator.clipboard.writeText(document.getElementById('pix-code').innerText);
            alert("Pix Copiado!");
        }

        async function enviarOp(t) {
            // ... Mesma lógica de envio com filtro anti-bullying ...
            const v = document.getElementById(t === 'DEPOSITO' ? 'val-dep' : 'val-saq')?.value || '0';
            const extra = document.getElementById('link-comp')?.value || 'N/A';
            
            await fetch(API, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ data: [{
                    id: 'TX-' + Math.floor(Math.random() * 9999),
                    merchant: user, tipo: t, valor: v, comprovante: extra, status: 'Pendente', data_hora: new Date().toLocaleString()
                }]})
            });
            alert("Sucesso! Operação em análise.");
            location.reload();
        }

        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        async function sincronizar() {
            if(!sessionStorage.getItem('auth_mf')) window.location.href = 'index.html';
            const res = await fetch(API);
            const dados = await res.json();
            const conta = dados.find(i => i.merchant === user && i.tipo === 'SALDO');
            document.getElementById('bal').innerText = `R$ ${parseFloat(conta?.valor || 0).toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
        }
        setInterval(sincronizar, 10000);
        sincronizar();
    </script>
</body>
</html>
