<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | MFpay</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        input[type="file"] { display: none; }
        .custom-file-upload { border: 1px dashed #333; padding: 20px; border-radius: 20px; cursor: pointer; display: block; text-align: center; }
    </style>
</head>
<body class="flex flex-col md:flex-row min-h-screen">
    <aside class="w-full md:w-72 bg-[#0a0a0a] p-10 border-r border-white/5">
        <h1 class="text-3xl font-black italic text-[#80ff44] mb-12">MFPAY</h1>
        <nav class="space-y-6 text-xs font-black uppercase tracking-widest">
            <div onclick="tab('dash')" class="cursor-pointer hover:text-[#80ff44]">In√≠cio</div>
            <div onclick="tab('dep')" class="cursor-pointer hover:text-[#80ff44]">Recarga</div>
        </nav>
    </aside>

    <main class="flex-1 p-10 md:p-20">
        <div id="dash" class="tab-content active">
            <h2 class="text-6xl font-black mb-10">R$ <span id="bal">0,00</span></h2>
        </div>

        <div id="dep" class="tab-content max-w-xl">
            <h2 class="text-3xl font-black mb-8 uppercase italic">Injetar Saldo</h2>
            <div class="space-y-6">
                <input type="number" id="val-dep" placeholder="Valor R$ 0,00" class="w-full bg-[#0a0a0a] p-5 rounded-2xl border border-white/10 outline-none text-2xl font-black">
                
                <label class="custom-file-upload">
                    <input type="file" id="file-comp" accept="image/*" onchange="previewFile()">
                    <span id="file-text" class="opacity-40 uppercase text-[10px] font-black">Anexar Comprovante (Foto)</span>
                </label>

                <button onclick="enviarOperacao()" class="w-full bg-[#80ff44] text-black py-6 rounded-3xl font-black uppercase italic">Enviar Protocolo</button>
            </div>
        </div>
    </main>

    <script>
        const API = 'https://sheetdb.io/api/v1/q28pv28d009pq';
        let base64Image = "";

        function tab(id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function previewFile() {
            const file = document.getElementById('file-comp').files[0];
            const reader = new FileReader();
            reader.onloadend = function() {
                base64Image = reader.result;
                document.getElementById('file-text').innerText = "FOTO ANEXADA COM SUCESSO";
                document.getElementById('file-text').style.color = "#80ff44";
            }
            if (file) reader.readAsDataURL(file);
        }

        async function enviarOperacao() {
            const val = document.getElementById('val-dep').value;
            if(!base64Image) { alert("Anexe a foto do comprovante!"); return; }

            await fetch(API, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ data: [{
                    id: 'TX-' + Math.floor(Math.random() * 9999),
                    merchant: 'Nando',
                    tipo: 'DEPOSITO',
                    valor: val,
                    comprovante: base64Image, // A FOTO VAI AQUI
                    status: 'Pendente',
                    data_hora: new Date().toLocaleString()
                }]})
            });
            alert("Enviado para o Radar Master!");
            location.reload();
        }
    </script>
</body>
</html>
