<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MFpay | Dashboard de Elite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
    <style>
        body { background: #050505; color: #fff; font-family: 'Inter', sans-serif; overflow: hidden; }
        .sidebar { background: #080808; border-right: 1px solid #151515; height: 100vh; position: fixed; width: 280px; z-index: 50; transition: 0.3s; }
        .main-content { margin-left: 280px; padding: 40px; height: 100vh; overflow-y: auto; background: radial-gradient(circle at top right, #0a0a0a, #050505); }
        .gateway-card { background: rgba(15, 15, 15, 0.8); border-radius: 24px; border: 1px solid #1a1a1a; backdrop-filter: blur(10px); transition: 0.3s; }
        .gateway-card:hover { border-color: #80ff44; transform: translateY(-2px); }
        .nav-btn { width: 100%; text-align: left; padding: 20px 35px; font-size: 11px; font-weight: 800; text-transform: uppercase; color: #555; border-left: 4px solid transparent; letter-spacing: 1px; }
        .nav-btn.active { color: #80ff44; background: linear-gradient(90deg, rgba(128,255,68,0.05), transparent); border-left-color: #80ff44; }
        .progress-fill { background: linear-gradient(90deg, #80ff44, #44ff80); height: 100%; transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 0 20px rgba(128,255,68,0.3); }
        input, select { background: #000 !important; border: 1px solid #222 !important; border-radius: 16px !important; color: #fff; padding: 20px; width: 100%; outline: none; transition: 0.3s; }
        input:focus { border-color: #80ff44 !important; box-shadow: 0 0 15px rgba(128,255,68,0.1); }
        .tab-content { display: none; animation: slideUp 0.5s ease-out; }
        .tab-content.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        #lock-screen { background: #000; position: fixed; inset: 0; z-index: 99999; display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .status-pill { padding: 4px 12px; rounded-full; font-size: 10px; font-weight: 900; text-transform: uppercase; }
    </style>
</head>
<body>

    <div id="lock-screen">
        <div class="w-20 h-20 border-t-4 border-[#80ff44] border-solid rounded-full animate-spin mb-8"></div>
        <h1 class="text-4xl font-black italic text-[#80ff44] mb-2 uppercase">SISTEMA BLOQUEADO</h1>
        <p class="text-gray-500 font-bold uppercase tracking-widest text-xs">Aguarde a liberação do Master MFpay</p>
    </div>

    <aside class="sidebar flex flex-col justify-between py-10">
        <div>
            <div class="px-12 mb-12"><h1 class="font-black italic text-3xl uppercase tracking-tighter text-[#80ff44]">MFpay</h1></div>
            <nav>
                <button onclick="openTab(event, 'dash')" class="nav-btn active">Visão Geral</button>
                <button onclick="openTab(event, 'extrato')" class="nav-btn">Extrato de Capital</button>
                <button onclick="openTab(event, 'deposito')" class="nav-btn">Injetar Saldo</button>
                <button onclick="openTab(event, 'saque')" class="nav-btn text-[#80ff44]">Liquidação Pix</button>
                <button onclick="openTab(event, 'seguranca')" class="nav-btn">Segurança Master</button>
            </nav>
        </div>
        <div class="px-8 space-y-4">
            <div class="bg-white/5 p-4 rounded-2xl border border-white/5">
                <p class="text-[9px] font-black text-gray-500 uppercase mb-1">Status da Rede</p>
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 bg-[#80ff44] rounded-full animate-pulse"></div>
                    <span class="text-[10px] font-black uppercase text-white">Online</span>
                </div>
            </div>
            <p class="text-[9px] text-gray-800 font-black uppercase italic text-center">Merchant: MF</p>
        </div>
    </aside>

    <main class="main-content">
        <div id="dash" class="tab-content active space-y-8">
            <div class="flex justify-between items-end">
                <div>
                    <h2 class="text-5xl font-black italic uppercase">Dashboard</h2>
                    <p class="text-gray-600 text-[10px] font-bold uppercase mt-2 italic tracking-[0.2em]">Criptografia de Ponta a Ponta Ativa</p>
                </div>
                <div class="bg-blue-500/10 border border-blue-500/20 px-6 py-3 rounded-2xl">
                    <p class="text-blue-400 text-[9px] font-black uppercase italic tracking-widest">Selo Platinum Merchant</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="gateway-card p-12 lg:col-span-2 relative overflow-hidden">
                    <p class="text-gray-500 text-[11px] font-black uppercase mb-4 tracking-widest">Capital em Custódia</p>
                    <h2 id="bal" class="text-8xl font-black italic tracking-tighter text-white">R$ 0,00</h2>
                    <div class="mt-8 flex gap-6">
                        <div class="bg-white/5 px-4 py-2 rounded-xl text-[10px] font-black uppercase">Taxa Atual: <span id="tax-val" class="text-[#80ff44]">5%</span></div>
                        <div class="bg-white/5 px-4 py-2 rounded-xl text-[10px] font-black uppercase">Nível: <span id="tier-name" class="text-[#80ff44]">Soldado</span></div>
                    </div>
                </div>
                <div class="gateway-card p-10 flex flex-col justify-center text-center">
                    <p class="text-gray-500 text-[10px] font-black uppercase mb-6 italic">Performance para Próximo Tier</p>
                    <div class="relative w-40 h-40 mx-auto mb-6">
                        <svg class="w-full h-full transform -rotate-90">
                            <circle cx="80" cy="80" r="70" stroke="currentColor" stroke-width="8" fill="transparent" class="text-white/5" />
                            <circle id="circle-prog" cx="80" cy="80" r="70" stroke="currentColor" stroke-width="8" fill="transparent" stroke-dasharray="440" stroke-dashoffset="440" class="text-[#80ff44] transition-all duration-1000" />
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span id="prog-text" class="text-4xl font-black italic">0%</span>
                        </div>
                    </div>
                    <p class="text-[9px] text-gray-600 font-bold uppercase italic">Faturamento para Upgrade: R$ 50.000</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="gateway-card p-8">
                    <h3 class="text-xs font-black uppercase italic mb-4 text-gray-400">Notificações Recentes</h3>
                    <div id="mini-logs" class="space-y-3"></div>
                </div>
                <div class="gateway-card p-8 bg-gradient-to-br from-[#111] to-[#050505]">
                    <h3 class="text-xs font-black uppercase italic mb-4 text-[#80ff44]">Suporte VIP MFpay</h3>
                    <p class="text-[10px] text-gray-500 font-bold leading-relaxed italic uppercase">Seu gerente de conta está online. Qualquer dúvida sobre liquidação, entre em contato via canal master.</p>
                </div>
            </div>
        </div>

        <div id="extrato" class="tab-content space-y-8">
            <h2 class="text-5xl font-black italic uppercase">Extrato Master</h2>
            <div class="gateway-card overflow-hidden">
                <table class="w-full text-left">
                    <thead class="bg-black/80 text-[10px] font-black uppercase text-gray-600 tracking-[0.2em]">
                        <tr>
                            <th class="p-8">Identificador</th>
                            <th class="p-8">Data/Hora</th>
                            <th class="p-8">Operação</th>
                            <th class="p-8">Montante</th>
                            <th class="p-8 text-right">Status Final</th>
                        </tr>
                    </thead>
                    <tbody id="lista-extrato" class="text-xs font-bold italic"></tbody>
                </table>
            </div>
        </div>

        <div id="deposito" class="tab-content max-w-4xl mx-auto space-y-8">
            <h2 class="text-5xl font-black italic uppercase text-center">Injetar Capital</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="gateway-card p-12 space-y-8">
                    <p class="text-[11px] font-black text-gray-500 uppercase tracking-widest">1. Dados da Transação</p>
                    <input type="number" id="val-dep" placeholder="R$ 0,00" class="text-4xl font-black h-24">
                    <div class="space-y-2">
                        <p class="text-[10px] font-black text-[#80ff44] uppercase ml-2">Link do Comprovante (Obrigatório):</p>
                        <input type="text" id="link-comp" placeholder="https://imgur.com/seu-print" class="italic">
                    </div>
                </div>
                <div class="gateway-card p-12 space-y-8 bg-[#80ff44]/5">
                    <p class="text-[11px] font-black text-gray-500 uppercase tracking-widest">2. Recebedor Master</p>
                    <div class="bg-black p-8 rounded-2xl border border-[#80ff44]/20 text-center space-y-4">
                        <p class="text-[10px] font-black text-gray-600 uppercase tracking-widest">Chave Pix Oficial</p>
                        <h3 id="pix-admin-key" class="text-2xl font-black text-[#80ff44] font-mono break-all italic">---</h3>
                        <button onclick="navigator.clipboard.writeText(document.getElementById('pix-admin-key').innerText); alert('Pix Copiado!')" class="text-[9px] font-black bg-white text-black px-6 py-2 rounded-full uppercase italic hover:bg-[#80ff44] transition">Copiar Chave</button>
                    </div>
                    <button onclick="enviarOperacao('DEP')" class="w-full bg-[#80ff44] text-black font-black py-8 rounded-2xl text-[12px] uppercase italic tracking-[0.3em] shadow-[0_10px_40px_rgba(128,255,68,0.2)]">Efetivar Depósito</button>
                </div>
            </div>
        </div>

        <div id="saque" class="tab-content max-w-2xl mx-auto space-y-8">
            <h2 class="text-5xl font-black italic uppercase text-center">Liquidação Pix</h2>
            <div class="gateway-card p-12 space-y-8">
                <div class="space-y-2">
                    <p class="text-[10px] font-black text-gray-500 uppercase italic ml-2">Montante para Resgate:</p>
                    <input type="number" id="val-saq" placeholder="R$ 0,00" class="text-4xl font-black h-24">
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <p class="text-[10px] font-black text-gray-500 uppercase italic ml-2">Destino:</p>
                        <select id="tipo-pix" class="font-black uppercase text-xs">
                            <option value="CPF">CPF / CNPJ</option>
                            <option value="EMAIL">E-mail</option>
                            <option value="TELEFONE">Celular</option>
                            <option value="ALEATORIA">Chave Aleatória (EVP)</option>
                        </select>
                    </div>
                    <div class="space-y-2">
                        <p class="text-[10px] font-black text-gray-500 uppercase italic ml-2">Chave Pix:</p>
                        <input type="text" id="chave-pix" placeholder="000.000.000-00" class="font-black text-sm">
                    </div>
                </div>

                <div class="space-y-2">
                    <p class="text-[10px] font-black text-[#80ff44] uppercase italic text-center">Confirmação Master (PIN de 4 dígitos)</p>
                    <input type="password" id="pin-saque" maxlength="4" placeholder="****" class="text-center tracking-[2em] text-4xl font-black border-[#80ff44]/20 border-2">
                </div>

                <button onclick="enviarOperacao('SAQ')" class="w-full bg-[#80ff44] text-black font-black py-8 rounded-2xl text-[12px] uppercase italic tracking-[0.3em] shadow-[0_10px_40px_rgba(128,255,68,0.2)]">Solicitar Liquidação</button>
            </div>
        </div>

        <div id="seguranca" class="tab-content max-w-md mx-auto space-y-8 text-center">
            <h2 class="text-5xl font-black italic uppercase">Segurança</h2>
            <div class="gateway-card p-12 space-y-6">
                <p class="text-xs text-gray-600 font-bold uppercase italic italic">Altere seu PIN Master periodicamente para manter a integridade dos resgates.</p>
                <input type="password" id="new-pin" maxlength="4" placeholder="NOVO PIN" class="text-center text-3xl tracking-[1em] font-black">
                <button onclick="salvarPin()" class="w-full bg-white text-black font-black py-5 rounded-2xl uppercase italic text-[11px] tracking-widest">Atualizar Protocolo</button>
            </div>
        </div>
    </main>

<script>
    const user = "MF";
    let lastOpTime = 0;

    function logAuditoria(acao, nivel="INFO") {
        let logs = JSON.parse(localStorage.getItem('mf_logs_auditoria') || '[]');
        logs.unshift({ user: user, acao: acao, nivel: nivel, data: new Date().toLocaleString('pt-BR') });
        localStorage.setItem('mf_logs_auditoria', JSON.stringify(logs.slice(0, 100)));
    }

    // DISPARA AO ENTRAR
    window.onload = () => logAuditoria("Merchant MF acessou o painel principal");

    function openTab(evt, t) {
        document.querySelectorAll(".tab-content").forEach(x => x.classList.remove('active'));
        document.querySelectorAll(".nav-btn").forEach(x => x.classList.remove('active'));
        document.getElementById(t).classList.add('active');
        if(evt) evt.currentTarget.classList.add('active');
        if(t === 'extrato') renderExtrato();
        logAuditoria(`Merchant navegou para: ${t.toUpperCase()}`);
    }

    function renderExtrato() {
        const hist = JSON.parse(localStorage.getItem('hist_'+user) || '[]');
        document.getElementById('lista-extrato').innerHTML = hist.reverse().map(i => `
            <tr class="border-t border-white/5 hover:bg-white/5 transition">
                <td class="p-8 text-gray-500 font-mono">#${i.id}</td>
                <td class="p-8">${i.data}</td>
                <td class="p-8"><span class="uppercase ${i.tipo === 'SAQ' ? 'text-red-400' : 'text-blue-400'}">${i.tipo === 'SAQ' ? 'Liquidação' : 'Injeção'}</span></td>
                <td class="p-8 text-white font-black">R$ ${i.valor}</td>
                <td class="p-8 text-right font-black">
                    <span class="${i.status === 'Aprovado' ? 'text-[#80ff44]' : (i.status === 'Recusado' ? 'text-red-500' : 'text-yellow-500')}">
                        ${i.status.toUpperCase()}
                    </span>
                </td>
            </tr>
        `).join('');
    }

    function salvarPin() {
        const pin = document.getElementById('new-pin').value;
        if(pin.length === 4) {
            localStorage.setItem('pin_'+user, pin);
            logAuditoria("Merchant alterou o PIN de segurança", "AVISO");
            alert("PROTOCOLO DE SEGURANÇA ATUALIZADO!");
        } else { alert("PIN DEVE CONTER 4 DÍGITOS"); }
    }

    function enviarOperacao(t) {
        const v = parseFloat(document.getElementById(t === 'DEP' ? 'val-dep' : 'val-saq').value);
        const link = document.getElementById('link-comp').value;
        const pin = document.getElementById('pin-saque').value;
        const bal = parseFloat(localStorage.getItem('bal_'+user) || 0);
        const agora = Date.now();

        // ANTIFRAUDE: 30 Segundos entre transações
        if(agora - lastOpTime < 30000) {
            logAuditoria("TENTATIVA DE SPAM DETECTADA", "CRÍTICO");
            return alert("ANTIFRAUDE MFpay: Aguarde 30 segundos para nova solicitação.");
        }

        if(!v || v <= 0) return alert("INSIRA UM VALOR VÁLIDO");
        if(t === 'DEP' && !link) return alert("ERRO: COMPROVANTE OBRIGATÓRIO");
        
        if(t === 'SAQ') {
            if(pin !== localStorage.getItem('pin_'+user)) {
                logAuditoria("ERRO DE PIN EM TENTATIVA DE SAQUE", "ALTO RISCO");
                return alert("PIN DE SEGURANÇA INCORRETO!");
            }
            if(v > bal) return alert("SALDO INSUFICIENTE");
        }

        lastOpTime = agora;
        const hist = JSON.parse(localStorage.getItem('hist_'+user) || '[]');
        const pedidoId = Math.floor(100000 + Math.random() * 900000);
        const novoPedido = { 
            id: pedidoId, 
            data: new Date().toLocaleString('pt-BR'), 
            tipo: t, 
            valor: v.toFixed(2), 
            status: 'Pendente' 
        };
        
        hist.push(novoPedido);
        localStorage.setItem('hist_'+user, JSON.stringify(hist));
        
        // ENVIA PARA O MASTER
        localStorage.setItem('mf_ped', JSON.stringify({ 
            ...novoPedido, 
            user: user, 
            comprovante: link,
            pix_tipo: document.getElementById('tipo-pix').value,
            pix_chave: document.getElementById('chave-pix').value,
            risco: (v > bal * 0.8 && t === 'SAQ') ? 'ALTO' : 'NORMAL'
        }));

        logAuditoria(`Solicitou ${t === 'SAQ' ? 'Resgate' : 'Injeção'} de R$ ${v.toFixed(2)}`, t === 'SAQ' ? 'AVISO' : 'INFO');
        alert("SOLICITAÇÃO ENVIADA COM SUCESSO!");
        location.reload();
    }

    setInterval(() => {
        // SINAL DE VIDA
        localStorage.setItem('online_'+user, Date.now());

        const lock = localStorage.getItem('mf_lockdown') === 'true';
        document.getElementById('lock-screen').style.display = lock ? 'flex' : 'none';
        
        const s = parseFloat(localStorage.getItem('bal_'+user) || 0);
        document.getElementById('bal').innerText = `R$ ${s.toLocaleString('pt-BR',{minimumFractionDigits:2})}`;
        document.getElementById('pix-admin-key').innerText = localStorage.getItem('mf_pix') || 'DEFINA NO ADMIN';

        // LÓGICA DE TIERS (NÍVEL 3)
        let tier = "Soldado"; let taxa = "5%"; let per = (s/50000)*100; let next = 50000;
        if(s >= 500000) { tier = "Soberano"; taxa = "2%"; per = 100; next = 500000; }
        else if(s >= 100000) { tier = "Elite"; taxa = "3%"; per = (s/500000)*100; next = 500000; }
        else if(s >= 50000) { tier = "Pro Player"; taxa = "4%"; per = (s/100000)*100; next = 100000; }

        document.getElementById('tier-name').innerText = tier;
        document.getElementById('tax-val').innerText = taxa;
        document.getElementById('prog-text').innerText = Math.round(Math.min(per, 100)) + '%';
        document.getElementById('circle-prog').style.strokeDashoffset = 440 - (440 * Math.min(per, 100) / 100);

        // MINI LOGS
        const auditoria = JSON.parse(localStorage.getItem('mf_logs_auditoria') || '[]');
        document.getElementById('mini-logs').innerHTML = auditoria.slice(0, 3).map(l => `
            <div class="text-[9px] border-l-2 border-[#80ff44] pl-3 italic">
                <p class="text-white">${l.acao}</p>
                <p class="text-gray-600">${l.data}</p>
            </div>
        `).join('');
    }, 1500);
</script>
</body>
    </html>
    
