
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8"><title>Soberano Admin | MF PAY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #020617; color: white; font-family: sans-serif; }
        .tab-active { border-bottom: 2px solid #22c55e; color: #22c55e; }
        .card-mf { background: #0f172a; border: 1px solid #1e293b; }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-5xl mx-auto space-y-6">
        
        <header class="flex justify-between items-center bg-[#0f172a] p-6 rounded-[35px] border border-slate-800">
            <div>
                <h1 class="text-xl font-black text-green-500 italic">MF<span class="text-white">ADMIN</span></h1>
                <p id="lucro-total" class="text-[10px] font-bold text-slate-500 uppercase italic">LUCRO TOTAL MF: R$ 0,00</p>
            </div>
            <div class="flex gap-2">
                <button onclick="toggleLock()" id="lock-btn" class="bg-slate-800 text-white px-6 py-3 rounded-2xl font-black text-[10px] uppercase">üîí Lockdown</button>
                <button onclick="location.href='index.html'" class="bg-red-500/10 text-red-500 px-4 py-2 rounded-xl text-[10px] font-bold">SAIR</button>
            </div>
        </header>

        <nav class="flex gap-6 border-b border-slate-800 pb-3">
            <button onclick="tab('fila')" id="t-fila" class="tab-active text-[10px] font-black uppercase tracking-widest">üõí Fila de Pedidos</button>
            <button onclick="tab('ban')" id="t-ban" class="text-slate-500 text-[10px] font-black uppercase tracking-widest">üö´ Blacklist</button>
            <button onclick="tab('cfg')" id="t-cfg" class="text-slate-500 text-[10px] font-black uppercase tracking-widest">‚öôÔ∏è Configs</button>
        </nav>

        <div id="fila" class="tab-content space-y-4 pt-4">
            <div id="lista-pedidos"></div>
        </div>

        <div id="ban" class="hidden tab-content bg-[#0f172a] p-8 rounded-[40px] border border-slate-800">
            <h3 class="text-xs font-black text-red-500 uppercase mb-4 italic">Banir Usu√°rio</h3>
            <div class="flex gap-2 mb-6">
                <input type="text" id="u-ban" placeholder="Usu√°rio para banir" class="flex-1 bg-slate-900 p-4 rounded-2xl border border-slate-700 text-xs text-white">
                <button onclick="banir()" class="bg-red-600 text-white px-8 rounded-2xl font-black text-[10px]">BANIR</button>
            </div>
            <div id="lista-bans" class="flex flex-wrap gap-2"></div>
        </div>

        <div id="cfg" class="hidden tab-content bg-[#0f172a] p-8 rounded-[40px] border border-slate-800">
            <p class="text-[10px] font-bold text-slate-500 uppercase mb-2 italic">Trocar Chave PIX da MF PAY (Recebimento)</p>
            <input type="text" id="c-pix" class="w-full bg-slate-900 p-4 rounded-2xl border border-slate-700 text-xs font-bold mb-4 text-green-500">
            <button onclick="salvarPix()" class="w-full bg-green-500 text-black font-black py-4 rounded-2xl text-[10px] uppercase shadow-lg">Salvar Configura√ß√µes</button>
        </div>
    </div>

<script>
    function tab(id) {
        document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
        document.querySelectorAll('nav button').forEach(b => b.className = "text-slate-500 text-[10px] font-black uppercase tracking-widest");
        document.getElementById('t-'+id).className = "tab-active text-[10px] font-black uppercase tracking-widest";
    }

    function toggleLock() {
        const s = localStorage.getItem('mf_lockdown') === 'true';
        localStorage.setItem('mf_lockdown', !s);
        render();
    }

    function banir() {
        const u = document.getElementById('u-ban').value.toLowerCase().trim(); if(!u) return;
        let b = JSON.parse(localStorage.getItem('mf_blacklist') || '[]');
        if(!b.includes(u)) b.push(u);
        localStorage.setItem('mf_blacklist', JSON.stringify(b));
        render();
    }

    function salvarPix() {
        localStorage.setItem('mf_pix', document.getElementById('c-pix').value);
        alert("Chave PIX atualizada para todos os clientes!");
    }

    function render() {
        const p = JSON.parse(localStorage.getItem('mf_ped') || 'null');
        const lista = document.getElementById('lista-pedidos');
        
        if(!p) {
            lista.innerHTML = `<p class="text-center p-20 text-slate-700 text-[10px] font-bold uppercase animate-pulse italic">Nenhum pedido pendente...</p>`;
        } else {
            const isSaque = p.tipo === 'SAQ';
            lista.innerHTML = `<div class="p-8 rounded-[40px] card-mf flex flex-col md:flex-row justify-between items-center shadow-2xl gap-6 border-l-4 ${isSaque ? 'border-blue-500' : 'border-green-500'}">
                <div class="flex-1">
                    <p class="text-[9px] font-black ${isSaque ? 'text-blue-400' : 'text-green-500'} uppercase">${p.tipo} DE ${p.user}</p>
                    <h2 class="text-5xl font-black italic tracking-tighter text-white">R$ ${p.valor}</h2>
                    
                    ${isSaque ? `
                        <div class="mt-4 bg-black/40 p-4 rounded-2xl border border-white/5">
                            <p class="text-[8px] text-slate-500 font-bold uppercase mb-1">PIX DO CLIENTE (${p.cli_pix_tipo})</p>
                            <div class="flex items-center gap-2">
                                <span class="text-[11px] font-mono text-green-400 font-bold">${p.cli_pix_chave}</span>
                                <button onclick="navigator.clipboard.writeText('${p.cli_pix_chave}'); alert('Copiado!')" class="bg-slate-800 text-[8px] px-2 py-1 rounded">COPIAR</button>
                            </div>
                        </div>
                    ` : ''}

                    ${p.comprovante ? `<a href="${p.comprovante}" target="_blank" class="text-[9px] text-blue-400 font-bold underline mt-3 block">VER COMPROVANTE</a>` : ''}
                </div>
                <div class="flex flex-col gap-2">
                    <button onclick="proc('OK','${p.valor}','${p.user}','${p.tipo}')" class="bg-green-500 text-black px-12 py-4 rounded-2xl font-black text-[10px] uppercase shadow-lg hover:scale-105">Aprovar</button>
                    <button onclick="proc('REC',0,'${p.user}')" class="bg-slate-900 text-red-500 border border-red-500/20 px-12 py-4 rounded-2xl font-black text-[10px] uppercase">Recusar</button>
                </div>
            </div>`;
        }

        const l = localStorage.getItem('mf_lockdown') === 'true';
        document.getElementById('lock-btn').innerText = l ? "üîì Abrir Site" : "üîí Lockdown";
        document.getElementById('lock-btn').className = l ? "bg-red-600 text-white px-6 py-3 rounded-2xl font-black text-[10px] uppercase animate-pulse" : "bg-slate-800 text-white px-6 py-3 rounded-2xl font-black text-[10px] uppercase";

        const bans = JSON.parse(localStorage.getItem('mf_blacklist') || '[]');
        document.getElementById('lista-bans').innerHTML = bans.map(b => `<span class="bg-red-500/10 text-red-500 px-3 py-1 rounded-full border border-red-500/20 uppercase font-bold text-[9px]">${b}</span>`).join('');
        
        const lucro = parseFloat(localStorage.getItem('mf_lucro_total') || 0);
        document.getElementById('lucro-total').innerText = `LUCRO TOTAL MF: R$ ${lucro.toLocaleString('pt-BR',{minimumFractionDigits:2})}`;
    }

    function proc(s, v, u, t) {
        if(s === 'OK') {
            let b = parseFloat(localStorage.getItem('bal_'+u) || 0);
            if(t === 'SAQ') {
                localStorage.setItem('bal_'+u, (b - parseFloat(v)).toFixed(2));
                let luc = parseFloat(localStorage.getItem('mf_lucro_total') || 0);
                localStorage.setItem('mf_lucro_total', (luc + (v * 0.05)).toFixed(2));
            } else {
                localStorage.setItem('bal_'+u, (b + parseFloat(v)).toFixed(2));
            }
        }
        localStorage.removeItem('mf_ped'); render();
    }

    document.getElementById('c-pix').value = localStorage.getItem('mf_pix') || '';
    setInterval(render, 3000); render();
</script>
</body>
</html>
