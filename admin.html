
    function ajustarSaldo(k, u) {
        let n = prompt(`Ajustar Saldo MF de ${u}:`);
        if(n !== null) {
            localStorage.setItem(k, parseFloat(n).toFixed(2));
            renderMerchants();
        }
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    const SUPABASE_URL = 'https://yyykflzmsvcgendfdmou.supabase.co';
    const SUPABASE_KEY = 'SUA_ANON_PUBLIC_KEY_AQUI'; // Pegue no seu painel API
    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    async function atualizarInterface() {
        const { data: pedidos } = await supabaseClient
            .from('transacoes')
            .select('*')
            .eq('status', 'Pendente')
            .order('created_at', { ascending: false });

        const lista = document.getElementById('lista-pedidos');
        if (!pedidos || pedidos.length === 0) {
            lista.innerHTML = '<div class="p-20 text-center opacity-30 font-black uppercase italic">Vigilância Estável: Sem Pedidos</div>';
            return;
        }

        lista.innerHTML = pedidos.map(p => `
            <div class="admin-card p-8 mb-4 flex justify-between items-center border-l-4 border-[#80ff44]">
                <div>
                    <h3 class="font-black italic text-2xl uppercase">${p.merchant} - ${p.tipo}</h3>
                    <p class="text-[10px] text-gray-500 font-mono">${p.pix_chave || 'Link do Comprovante'}</p>
                </div>
                <div class="text-right">
                    <h2 class="text-4xl font-black text-[#80ff44]">R$ ${parseFloat(p.valor).toFixed(2)}</h2>
                    <button onclick="mudarStatus('${p.id}', 'Aprovado')" class="bg-[#80ff44] text-black px-8 py-2 rounded-xl font-black mt-4 uppercase italic">Aprovar</button>
                </div>
            </div>`).join('');
    }

    async function mudarStatus(id, novoStatus) {
        await supabaseClient.from('transacoes').update({ status: novoStatus }).eq('id', id);
        atualizarInterface();
    }

    // O SISTEMA ESCUTA O BANCO E ATUALIZA SOZINHO (REAL-TIME)
    supabaseClient.channel('custom-all-channel')
        .on('postgres_changes', { event: '*', schema: 'public', table: 'transacoes' }, () => {
            atualizarInterface();
            document.getElementById('snd')?.play(); // Toca o som de venda
        }).subscribe();

    atualizarInterface();
</script>
