<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8"><title>Soberano | Admin MF</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#020617] text-white p-4 md:p-10 font-sans">
    <div class="max-w-4xl mx-auto space-y-6">
        <header class="flex justify-between items-center bg-[#0f172a] p-6 rounded-3xl border border-slate-800 shadow-xl">
            <h1 class="text-xl font-black text-green-500 italic">MF<span class="text-white">ADMIN</span></h1>
            <button onclick="localStorage.clear();location.href='index.html'" class="text-[10px] font-bold text-red-500 uppercase tracking-widest bg-red-500/10 px-4 py-2 rounded-full">Sair do Master</button>
        </header>

        <div class="bg-[#0f172a] p-8 rounded-[35px] border border-slate-800 shadow-lg">
            <h3 class="text-xs font-black text-green-500 uppercase mb-6 italic underline">Configuração do Sistema</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="space-y-2">
                    <label class="text-[9px] text-slate-500 font-bold uppercase ml-2">Sua Chave PIX Atual</label>
                    <input type="text" id="c-pix" placeholder="E-mail, CPF ou Aleatória" class="w-full bg-[#1e293b] p-4 rounded-2xl outline-none text-xs font-bold border border-slate-700 focus:border-green-500">
                </div>
                <div class="flex items-end">
                    <button onclick="salvar()" class="w-full bg-green-500 text-black font-black py-4 rounded-2xl uppercase text-[10px] hover:bg-green-400 transition">Atualizar Chave PIX</button>
                </div>
            </div>
        </div>

        <div class="bg-[#0f172a] p-8 rounded-[35px] border border-slate-800 shadow-lg">
            <h3 class="text-xs font-black text-slate-400 uppercase mb-6 italic underline">Transações Pendentes</h3>
            <div id="fila" class="space-y-4"></div>
        </div>
    </div>

<script>
    function salvar() {
        const pix = document.getElementById('c-pix').value;
        const conf = JSON.parse(localStorage.getItem('mf_config') || '{}');
        conf.pix = pix;
        localStorage.setItem('mf_config', JSON.stringify(conf));
        alert("PIX ATUALIZADO! Já mudou no painel dos clientes.");
    }

    function render() {
        const p = JSON.parse(localStorage.getItem('mf_ped') || 'null');
        const fila = document.getElementById('fila');
        if(!p) fila.innerHTML = `<p class="text-slate-600 italic text-center text-[10px] py-16 uppercase font-bold tracking-[0.3em]">Nenhum pedido no radar...</p>`;
        else {
            fila.innerHTML = `
            <div class="p-6 rounded-3xl bg-[#1e293b] border border-slate-700 flex justify-between items-center animate-pulse">
                <div>
                    <p class="text-[10px] font-bold text-green-500 uppercase">${p.tipo} SOLICITADO POR ${p.user}</p>
                    <p class="text-3xl font-black italic tracking-tighter">R$ ${p.valor}</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="proc('OK','${p.valor}','${p.user}')" class="bg-green-500 text-black px-8 py-3 rounded-2xl font-black text-[10px] uppercase">Aprovar</button>
                    <button onclick="proc('REC',0,'${p.user}')" class="bg-slate-900 text-white px-8 py-3 rounded-2xl font-black text-[10px] uppercase">Lixo</button>
                </div>
            </div>`;
        }
    }

    function proc(s, v, u) {
        if(s === 'OK') {
            let b = parseFloat(localStorage.getItem('bal_'+u) || 0);
            localStorage.setItem('bal_'+u, (b + parseFloat(v)).toFixed(2));
        }
        localStorage.removeItem('mf_ped');
        location.reload();
    }
    
    // Carrega o pix atual no input ao abrir
    const c = JSON.parse(localStorage.getItem('mf_config') || '{}');
    if(c.pix) document.getElementById('c-pix').value = c.pix;

    setInterval(render, 2000);
    render();
</script>
</body>
</html>
