<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MF | Radar Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white p-8 md:p-16">
    <header class="mb-16">
        <h1 class="text-6xl font-black italic text-[#80ff44]">RADAR</h1>
        <p class="text-[10px] opacity-20 uppercase font-black tracking-widest mt-2">Sovereign Control</p>
    </header>
    <div id="lista" class="grid grid-cols-1 lg:grid-cols-2 gap-8"></div>
    <script>
        const API = 'https://sheetdb.io/api/v1/n1iq28pv28d009pq';
        async function load() {
            const res = await fetch(API); const d = await res.json();
            const fl = d.filter(i => i.status === 'Pendente');
            document.getElementById('lista').innerHTML = fl.map(p => `
                <div class="bg-[#0a0a0a] p-10 rounded-[45px] border border-white/5 flex justify-between items-center">
                    <div><p class="text-[9px] font-black text-[#80ff44] uppercase">${p.merchant} | ${p.tipo}</p><h3 class="text-3xl font-black italic">R$ ${p.valor}</h3></div>
                    <div class="flex gap-2">
                        <button onclick="possess('${p.merchant}')" class="bg-zinc-800 text-[8px] px-6 py-4 rounded-xl font-black uppercase">Entrar</button>
                        <button onclick="ok('${p.id}')" class="bg-white text-black text-[8px] px-8 py-4 rounded-xl font-black uppercase">Validar</button>
                    </div>
                </div>
            `).join('');
        }
        function possess(m) { sessionStorage.setItem('mf_a', btoa('user')); sessionStorage.setItem('mf_u', m); window.open('painel.html', '_blank'); }
        async function ok(id) { await fetch(`${API}/id/${id}`, {method:'PATCH', headers:{'Content-Type':'application/json'}, body:JSON.stringify({data:{status:'Aprovado'}})}); load(); }
        load();
    </script>
</body>
</html>
